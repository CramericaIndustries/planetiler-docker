# Set AREANAME environment variable via command line like so...
# docker-compose run -d --rm -e AREANAME=monaco -e RAM_GB=2 --name=pt-monaco planetiler
# show logs
# docker logs -f pt-monaco

# Monaco is default Area
# for area names @see https://download.geofabrik.de/europe.html

# @see https://github.com/onthegomap/planetiler

version: '3'
services:
  # this builds the "planetiler:0.9.2" image on which the other gen-* services are based on
  planetiler:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        PLANETILER_VERSION: 0.9.2
    image: planetiler:0.9.2
    volumes:
      - ./output:/output
      - ./sources:/tmp/data/sources
    command: ["true"]

  gen-planet:
    image: planetiler:0.9.2
    depends_on:
      - planetiler    
    environment:
      - AREANAME=planet
      - RAM_GB=100
      - BOUNDS="--bounds=world"
    volumes:
      - ./output:/output
      - ./sources:/tmp/data/sources


  gen-great-britain:
    image: planetiler:0.9.2
    depends_on:
      - planetiler 
    environment:
      - AREANAME=great-britain
      - RAM_GB=12
    volumes:
      - ./output:/output
      - ./sources:/tmp/data/sources


  gen-monaco:
    image: planetiler:0.9.2
    depends_on:
      - planetiler 
    environment:
      - AREANAME=monaco
      - RAM_GB=1
    volumes:
      - ./output:/output
      - ./sources:/tmp/data/sources


  gen-switzerland:
    image: planetiler:0.9.2
    depends_on:
      - planetiler 
    environment:
      - AREANAME=switzerland
      - RAM_GB=4
    volumes:
      - ./output:/output
      - ./sources:/tmp/data/sources


  gen-sweden:
    image: planetiler:0.9.2
    depends_on:
      - planetiler 
    environment:
      - AREANAME=sweden
      - RAM_GB=4
    volumes:
      - ./output:/output
      - ./sources:/tmp/data/sources



  gen-massachusetts:
    image: planetiler:0.9.2
    depends_on:
      - planetiler 
    environment:
      - AREANAME=massachusetts
      - RAM_GB=4
    volumes:
      - ./output:/output
      - ./sources:/tmp/data/sources


  gen-portugal:
    image: planetiler:0.9.2
    depends_on:
      - planetiler 
    environment:
      - AREANAME=portugal
      - RAM_GB=4
    volumes:
      - ./output:/output
      - ./sources:/tmp/data/sources


  gen-us-pacific:
    image: planetiler:0.9.2
    depends_on:
      - planetiler 
    environment:
      - AREANAME=us-pacific
      - RAM_GB=4
    volumes:
      - ./output:/output
      - ./sources:/tmp/data/sources

